"use strict";function makeAlert(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5e3,r=document.querySelector(".toasts");r||((r=document.createElement("div")).classList.add("toasts"),document.body.appendChild(r));var o=document.createElement("div");o.classList.add("toasts__item"),e&&o.classList.add(e),o.textContent=t,r.appendChild(o),o.addEventListener("click",function(){return closeAlert(r,o)}),setTimeout(function(){return closeAlert(r,o)},n)}function closeAlert(e,t){t.classList.add("disappear"),setTimeout(function(){t.remove(),e&&e.childElementCount<=0&&e.remove()},500)}var loader='<div class="loader"><span></span><span></span><span></span><span></span></div>',image_placeholder="./img/no_image.jpg";function SmoothScrollTo(e){e&&e.scrollIntoView({behavior:"smooth"})}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("a"),t=document.querySelectorAll("table"),n=document.querySelectorAll("form");document.querySelectorAll("img");function c(e){e.classList.remove("submit"),e.querySelector('[type="submit"]').disabled=!1}e.forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget.getAttribute("href");"#"==t.charAt(0)&&(e.preventDefault(),1<t.length&&((e=document.querySelector(e.currentTarget.hash))&&SmoothScrollTo(e)))})}),t.forEach(function(e){e.parentElement.classList.contains("table-responsive")||(e.outerHTML='<div class="table-responsive">'+e.outerHTML+"</div>")}),n.forEach(function(n){function r(e){var t=e.getAttribute("data-hide");"checkbox"!==e.getAttribute("type")||e.checked||(t?t+=","+e.getAttribute("data-show"):t=e.getAttribute("data-show")),(t="radio"===e.getAttribute("type")&&!e.checked?null:t)&&t.split(",").forEach(function(e){var t=a.querySelector("[name='"+e+"']"),e=t.parentElement;(e.classList.contains("form-control")?e:t).classList.add("hidden")})}function o(e){var t=e.getAttribute("data-show");"checkbox"!==e.getAttribute("type")||e.checked||(t=null),(t="radio"===e.getAttribute("type")&&!e.checked?null:t)&&t.split(",").forEach(function(e){var t=a.querySelector("[name='"+e+"']"),e=t.parentElement;(e.classList.contains("form-control")?e:t).classList.remove("hidden")})}var a;n.insertAdjacentHTML("beforeend",loader),(a=n).querySelectorAll("[data-form-behavior]").forEach(function(t){"visibility"===t.getAttribute("data-form-behavior")&&(r(t),o(t)),t.addEventListener("change",function(e){"visibility"===t.getAttribute("data-form-behavior")&&(r(t),o(t))})}),n.addEventListener("submit",function(e){e.preventDefault(),(e=n).classList.add("submit"),e.querySelector('[type="submit"]').disabled=!0;e=new FormData(n);fetch(n.action,{method:"POST",body:e}).then(function(e){return e.json()}).then(function(e){var t;1===e.success?(e.message.length&&makeAlert("success",e.message),n.hasAttribute("data-redirect")&&("this"===(t=n.getAttribute("data-redirect"))?document.location.reload():window.location.href=t),n.hasAttribute("data-reset")&&n.reset()):makeAlert("error",e.message),c(n)}).catch(function(e){makeAlert("error",e),c(n)})})})}),window.onload=function(){document.querySelectorAll("img").forEach(function(e){e.complete&&void 0!==e.naturalWidth&&e.naturalWidth<=0&&(e.src=image_placeholder)}),document.addEventListener("contextmenu",function(e){"IMG"==e.target.nodeName&&e.preventDefault()})};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFrZUFsZXJ0IiwidHlwZSIsInRleHQiLCJ0aW1lIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsImFkZCIsInRvYXN0IiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VBbGVydCIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJjaGlsZEVsZW1lbnRDb3VudCIsImxvYWRlciIsImltYWdlX3BsYWNlaG9sZGVyIiwiU21vb3RoU2Nyb2xsVG8iLCJlbGVtZW50Iiwic2Nyb2xsSW50b1ZpZXciLCJiZWhhdmlvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YWJsZXMiLCJmb3JtcyIsImhpZGVJdGVtcyIsImNvbnRyb2wiLCJzaG93SXRlbXMiLCJmb3JtIiwiZGlzYWJsZWQiLCJhbmNob3JzIiwiZm9yRWFjaCIsImFuY2hvciIsImV2ZW50IiwiZ2V0QXR0cmlidXRlIiwiaW1hZ2VzIiwiYW5jaG9yX2hyZWYiLCJjdXJyZW50VGFyZ2V0IiwiaGFzaCIsInNjcm9sbF90b19ub2RlIiwidGFibGUiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJvdXRlckhUTUwiLCJlbmFibGVGb3JtIiwiY2hlY2tlZCIsImhpZGUiLCJmb3JtQmVoYXZpb3IiLCJzcGxpdCIsInRvX2hpZGUiLCJwYXJlbnQiLCJpdGVtIiwic2hvdyIsInRvX3Nob3ciLCJpbnNlcnRBZGphY2VudEhUTUwiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnRyb2xzIiwiRm9ybURhdGEiLCJkaXNhYmxlRm9ybSIsIm1ldGhvZCIsImZvcm1EYXRhIiwidGhlbiIsInJlc3BvbnNlIiwiZGF0YSIsImZldGNoIiwic3VjY2VzcyIsImhhc0F0dHJpYnV0ZSIsImpzb24iLCJtZXNzYWdlIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicmVkaXJlY3QiLCJyZXNldCIsImNhdGNoIiwiZXJyb3IiLCJpbWFnZSIsImNvbXBsZXRlIiwibmF0dXJhbFdpZHRoIiwic3JjIiwidGFyZ2V0Iiwibm9kZU5hbWUiXSwibWFwcGluZ3MiOiJhQUNBLFNBQVNBLFVBQVVDLEVBQU1DLEdBQW1CLElBQWJDLEVBQWEsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQU4sSUFEdENHLEVBQUFDLFNBQUFDLGNBQUEsV0FDQUYsS0FBNENBLEVBQUFDLFNBQUFFLGNBQUEsUUFDdkNILFVBQVlDLElBQVEsVUFJdkJBLFNBQVNHLEtBQUtDLFlBQVlMLElBRDFCQSxJQUFBQSxFQUFTQyxTQUFDSyxjQUFWLE9BQ0FMLEVBQUFBLFVBQUFNLElBQWNGLGdCQUNkWCxHQUtBYyxFQUFNRixVQUFVQyxJQUFJYixHQUZyQmMsRUFBS0MsWUFBTGQsRUFDQUssRUFBQUssWUFBU0csR0FFUkEsRUFBQUUsaUJBQUEsUUFBQSxXQUFBLE9BQUFDLFdBQUFYLEVBQUFRLEtBQ0RBLFdBQU1DLFdBQUFBLE9BQUFBLFdBQU5ULEVBQUFRLElBQUFaLEdBSWdDLFNBQUFlLFdBQU1BLEVBQVVILEdBQWhCQSxFQUFoQ0YsVUFBQUMsSUFBQSxhQUVBSyxXQUFVLFdBQUNKLEVBQUFLLFNBQW9DakIsR0FBL0NJLEVBQUFjLG1CQUFBLEdBQ0FkLEVBQUFhLFVBRUQsS0FXQSxJQUFNRSxPQUFTLGlGQVBiQyxrQkFBZ0JoQixxQkFHaEIsU0FMRGlCLGVBQUFDLEdBUURBLEdBT0VBLEVBQVFDLGVBQWUsQ0FDckJDLFNBQVUsV0FGYm5CLFNBQUdpQixpQkFBUyxtQkFBQSxXQUVURSxJQUFBQSxFQUFVbkIsU0FBQW9CLGlCQUFBLEtBRFpDLEVBQUFyQixTQUFBb0IsaUJBQUEsU0FHQUUsRUFBQXRCLFNBQUFvQixpQkFBQSxRQUNEcEIsU0FBQW9CLGlCQUFBLE9BZ0lFRyxTQUFBQSxFQUFVQyxHQUNWQyxFQUFBQSxVQUFBQSxPQUFV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UXdFLEdBQ1B0QyxFQUFBQSxXQXdFREgsT0FBQUEsT0FBQUEsV0FDQUUsU0FBVUQsaUJBQVYsT0FDQUssUUFBQSxTQUFBNkMsR0FDREEsRUFMREMsZUFBQSxJQUFBRCxFQUFBRSxjQUFBRixFQUFBRSxjQUFBLElBTUFGLEVBYkRHLElBQUE5RCxxQkFrQkFXLFNBQUt6QixpQkFBYyxjQUFtQjBCLFNBQUFBLEdBQ3RDLE9BQUFJLEVBQUErQyxPQUFBQyxVQW1CRWhELEVBQU1zQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9BU1RTXHJcbmZ1bmN0aW9uIG1ha2VBbGVydCh0eXBlLCB0ZXh0LCB0aW1lID0gNTAwMCkge1xyXG5cdGxldCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvYXN0c1wiKTtcclxuXHRpZighY29udGFpbmVyKSB7XHJcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdFx0Y29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdHNcIik7XHJcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcblx0fVxyXG5cclxuXHRsZXQgdG9hc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cdHRvYXN0LmNsYXNzTGlzdC5hZGQoXCJ0b2FzdHNfX2l0ZW1cIik7XHJcblx0aWYodHlwZSkge1xyXG5cdFx0dG9hc3QuY2xhc3NMaXN0LmFkZCh0eXBlKTtcclxuXHR9XHJcblx0dG9hc3QudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG5cclxuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQodG9hc3QpO1xyXG5cclxuXHR0b2FzdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VBbGVydChjb250YWluZXIsIHRvYXN0KSk7XHJcblxyXG5cdHNldFRpbWVvdXQoKCkgPT4gY2xvc2VBbGVydChjb250YWluZXIsIHRvYXN0KSwgdGltZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlQWxlcnQoY29udGFpbmVyLCB0b2FzdCkge1xyXG5cdHRvYXN0LmNsYXNzTGlzdC5hZGQoXCJkaXNhcHBlYXJcIik7XHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHR0b2FzdC5yZW1vdmUoKTtcclxuXHRcdGlmKGNvbnRhaW5lciAmJiBjb250YWluZXIuY2hpbGRFbGVtZW50Q291bnQgPD0gMCkge1xyXG5cdFx0XHRjb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fSwgNTAwKTtcclxufVxyXG5cclxuLy8gSU5URVJBQ1RJVkUgRUxFTUVOVFNcclxuY29uc3QgbG9hZGVyID0gJzxkaXYgY2xhc3M9XCJsb2FkZXJcIj48c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48c3Bhbj48L3NwYW4+PC9kaXY+JztcclxuY29uc3QgaW1hZ2VfcGxhY2Vob2xkZXIgPSAnLi9pbWcvbm9faW1hZ2UuanBnJztcclxuXHJcbi8vIEZVTkNUSU9OU1xyXG5mdW5jdGlvbiBTbW9vdGhTY3JvbGxUbyhlbGVtZW50KSB7XHJcblx0aWYoZWxlbWVudCkge1xyXG5cdFx0ZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7XHJcblx0XHRcdFx0YmVoYXZpb3I6IFwic21vb3RoXCJcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG5cdC8vIERPTSBOT0RFU1xyXG5cdGNvbnN0IGFuY2hvcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYVwiKTtcclxuXHRjb25zdCB0YWJsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidGFibGVcIik7XHJcblx0Y29uc3QgZm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZm9ybVwiKTtcclxuXHRjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nXCIpO1xyXG5cclxuXHQvLyBTTU9PVEggU0NST0xMXHJcblx0YW5jaG9ycy5mb3JFYWNoKGFuY2hvciA9PiB7XHJcblx0XHRhbmNob3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50ID0+IHtcclxuXHRcdFx0Y29uc3QgYW5jaG9yX2hyZWYgPSBldmVudC5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIik7XHJcblx0XHRcdGlmKGFuY2hvcl9ocmVmLmNoYXJBdCgwKSA9PSBcIiNcIikge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0aWYoYW5jaG9yX2hyZWYubGVuZ3RoID4gMSkgeyAvLyBpZiAjaGFzaCBpcyBub3QgZW1wdHlcclxuXHRcdFx0XHRcdGNvbnN0IHNjcm9sbF90b19ub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihldmVudC5jdXJyZW50VGFyZ2V0Lmhhc2gpO1xyXG5cdFx0XHRcdFx0aWYoc2Nyb2xsX3RvX25vZGUpIHtcclxuXHRcdFx0XHRcdFx0U21vb3RoU2Nyb2xsVG8oc2Nyb2xsX3RvX25vZGUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdC8vIFJFU1BPTlNJVkUgVEFCTEVTXHJcblx0dGFibGVzLmZvckVhY2godGFibGUgPT4ge1xyXG5cdFx0aWYoIXRhYmxlLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFibGUtcmVzcG9uc2l2ZVwiKSkge1xyXG5cdFx0XHR0YWJsZS5vdXRlckhUTUwgPSAnPGRpdiBjbGFzcz1cInRhYmxlLXJlc3BvbnNpdmVcIj4nK3RhYmxlLm91dGVySFRNTCsnPC9kaXY+JztcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gRk9STVNcclxuXHRmb3Jtcy5mb3JFYWNoKGZvcm0gPT4ge1xyXG5cdGZvcm0uaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGxvYWRlcik7XHJcblxyXG5cdGZvcm1CZWhhdmlvcihmb3JtKTtcclxuXHJcblx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGV2ZW50ID0+IHtcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcclxuXHRcdGRpc2FibGVGb3JtKGZvcm0pO1xyXG5cclxuXHRcdGxldCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcclxuXHRcdC8vIGZvcm1EYXRhLnNldChcImNzcmZfdG9rZW5cIiwgY3NyZl90b2tlbik7XHJcblxyXG5cdFx0ZmV0Y2goZm9ybS5hY3Rpb24sIHttZXRob2Q6IFwiUE9TVFwiLCBib2R5OiBmb3JtRGF0YX0pXHJcblx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHQudGhlbihkYXRhID0+IHtcclxuXHRcdFx0aWYoZGF0YS5zdWNjZXNzID09PSAxKSB7XHJcblx0XHRcdFx0aWYoZGF0YS5tZXNzYWdlLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0bWFrZUFsZXJ0KFwic3VjY2Vzc1wiLCBkYXRhLm1lc3NhZ2UpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZihmb3JtLmhhc0F0dHJpYnV0ZShcImRhdGEtcmVkaXJlY3RcIikpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHJlZGlyZWN0ID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJlZGlyZWN0XCIpO1xyXG5cdFx0XHRcdFx0aWYocmVkaXJlY3QgPT09IFwidGhpc1wiKSB7XHJcblx0XHRcdFx0XHRcdGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYoZm9ybS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXJlc2V0XCIpKSB7XHJcblx0XHRcdFx0XHRmb3JtLnJlc2V0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG1ha2VBbGVydChcImVycm9yXCIsIGRhdGEubWVzc2FnZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZW5hYmxlRm9ybShmb3JtKTtcclxuXHRcdH0pXHJcblx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRtYWtlQWxlcnQoXCJlcnJvclwiLCBlcnJvcik7XHJcblx0XHRcdGVuYWJsZUZvcm0oZm9ybSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBmb3JtQmVoYXZpb3IoZm9ybSkge1xyXG5cdGNvbnN0IGNvbnRyb2xzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtZm9ybS1iZWhhdmlvcl1cIik7XHJcblxyXG5cdGZ1bmN0aW9uIGhpZGVJdGVtcyhjb250cm9sKSB7XHJcblx0XHRsZXQgaGlkZSA9IGNvbnRyb2wuZ2V0QXR0cmlidXRlKFwiZGF0YS1oaWRlXCIpO1xyXG5cdFx0aWYoY29udHJvbC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpID09PSBcImNoZWNrYm94XCIgJiYgIWNvbnRyb2wuY2hlY2tlZCkge1xyXG5cdFx0XHRpZihoaWRlKSB7XHJcblx0XHRcdFx0aGlkZSArPSBcIixcIiArIGNvbnRyb2wuZ2V0QXR0cmlidXRlKFwiZGF0YS1zaG93XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGhpZGUgPSBjb250cm9sLmdldEF0dHJpYnV0ZShcImRhdGEtc2hvd1wiKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYoY29udHJvbC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpID09PSBcInJhZGlvXCIgJiYgIWNvbnRyb2wuY2hlY2tlZCkge1xyXG5cdFx0XHRoaWRlID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmKGhpZGUpIHtcclxuXHRcdFx0aGlkZS5zcGxpdChcIixcIikuZm9yRWFjaCh0b19oaWRlID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J1wiK3RvX2hpZGUrXCInXVwiKTtcclxuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSBpdGVtLnBhcmVudEVsZW1lbnQ7XHJcblx0XHRcdFx0aWYocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm0tY29udHJvbFwiKSkge1xyXG5cdFx0XHRcdFx0cGFyZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gc2hvd0l0ZW1zKGNvbnRyb2wpIHtcclxuXHRcdGxldCBzaG93ID0gY29udHJvbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNob3dcIik7XHJcblx0XHRpZihjb250cm9sLmdldEF0dHJpYnV0ZShcInR5cGVcIikgPT09IFwiY2hlY2tib3hcIiAmJiAhY29udHJvbC5jaGVja2VkKSB7XHJcblx0XHRcdHNob3cgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYoY29udHJvbC5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpID09PSBcInJhZGlvXCIgJiYgIWNvbnRyb2wuY2hlY2tlZCkge1xyXG5cdFx0XHRzaG93ID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmKHNob3cpIHtcclxuXHRcdFx0c2hvdy5zcGxpdChcIixcIikuZm9yRWFjaCh0b19zaG93ID0+IHtcclxuXHRcdFx0XHRjb25zdCBpdGVtID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J1wiK3RvX3Nob3crXCInXVwiKTtcclxuXHRcdFx0XHRjb25zdCBwYXJlbnQgPSBpdGVtLnBhcmVudEVsZW1lbnQ7XHJcblx0XHRcdFx0aWYocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcImZvcm0tY29udHJvbFwiKSkge1xyXG5cdFx0XHRcdFx0cGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRjb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG5cdFx0Ly8gb24gZm9ybSBpbml0XHJcblx0XHRpZihjb250cm9sLmdldEF0dHJpYnV0ZShcImRhdGEtZm9ybS1iZWhhdmlvclwiKSA9PT0gXCJ2aXNpYmlsaXR5XCIpIHtcclxuXHRcdFx0aGlkZUl0ZW1zKGNvbnRyb2wpO1xyXG5cdFx0XHRzaG93SXRlbXMoY29udHJvbCk7XHJcblx0XHR9XHJcblx0XHQvLyBvbiBmb3JtIGNoYW5nZVxyXG5cdFx0Y29udHJvbC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGV2ZW50ID0+IHtcclxuXHRcdFx0aWYoY29udHJvbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZvcm0tYmVoYXZpb3JcIikgPT09IFwidmlzaWJpbGl0eVwiKSB7XHJcblx0XHRcdFx0aGlkZUl0ZW1zKGNvbnRyb2wpO1xyXG5cdFx0XHRcdHNob3dJdGVtcyhjb250cm9sKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVGb3JtKGZvcm0pIHtcclxuXHRmb3JtLmNsYXNzTGlzdC5hZGQoXCJzdWJtaXRcIik7XHJcblx0Zm9ybS5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpLmRpc2FibGVkID0gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBlbmFibGVGb3JtKGZvcm0pIHtcclxuXHRmb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJzdWJtaXRcIik7XHJcblx0Zm9ybS5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpLmRpc2FibGVkID0gZmFsc2U7XHJcbn1cclxufSk7XHJcblxyXG4vLyBIQU5ETEUgQlJPS0VOIElNQUdFU1xyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG5cdGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWdcIik7XHJcblx0aW1hZ2VzLmZvckVhY2goaW1hZ2UgPT4ge1xyXG5cdFx0aWYoaW1hZ2UuY29tcGxldGUgJiYgdHlwZW9mIGltYWdlLm5hdHVyYWxXaWR0aCAhPSBcInVuZGVmaW5lZFwiICYmIGltYWdlLm5hdHVyYWxXaWR0aCA8PSAwKSB7XHJcblx0XHRcdGltYWdlLnNyYyA9IGltYWdlX3BsYWNlaG9sZGVyO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBQUk9URUNUIElNQUdFUyBGUk9NIERPV05MT0FEICh5dXAsIHNlc3VyaXRpIGx2bCAxNDAlIHhkKVxyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBldmVudCA9PiB7XHJcblx0XHRpZihldmVudC50YXJnZXQubm9kZU5hbWUgPT0gXCJJTUdcIikge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59OyJdfQ==